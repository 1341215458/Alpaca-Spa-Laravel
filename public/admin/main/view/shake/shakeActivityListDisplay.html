<table class="table table-togglable table-hover">
    <thead>
    <tr>
        <!--<th data-toggle="true">编号</th>-->
        <!-- <th data-hide="phone,tablet">描述</th>-->
        <th data-hide="">活动id</th>
        <th data-hide="">所属商家ID</th>
        <th data-hide="">活动类型</th>
        <th data-hide="">名称</th>
        <th data-hide="">开始时间</th>
        <th data-hide="">举办商家</th>
        <th data-hide="">操作</th>
    </tr>
    </thead>
    <tbody>
    <?spa foreach(it.list as key => item): ?>
    <tr>
        <td>{{= item.id }}</td>
        <td>{{= item.merchant_id }}</td>
        <td>{{ var enum_text = enum_type(item.type); }} {{= enum_text }}</td>
        <td>{{= item.name }}</td>
        <td>{{= item.start_time }}</td>
        <td>{{= item.business_name }}</td>
        <td>
            <button type="button" class="btn btn-default btn-xs" onclick='openItem("{{= item.id }}")'><i class="icon-hat position-left"></i>打开大屏幕</button>
            <button type="button" class="btn btn-default btn-xs" onclick='editShakeActivity("{{= item.id }}")'><i class="icon-hat position-left"></i>编辑</button>
            <button type="button" class="btn btn-default btn-xs" onclick='deleteShakeActivity("{{= item.id }}")'><i class="icon-cross2 position-left"></i>删除</button>
        </td>
    </tr>
    <?spa endForeach; ?>
    </tbody>
</table>

<script>

    var openItem = function (id) {
        window.open("http://" + window.location.host + "/shake/screen.html?activity_id="+id);
    };


    var editShakeActivity = function (id) {
        Alpaca.to("#/main/shake/shakeActivityEditView/" + id, {id: id});
    };

    var deleteShakeActivity = function (id) {
        var param = {
            id: id,
            url: API['shakeActivity_delete'],
            callback: function () {
                Alpaca.to("#/main/shake/shakeActivityListView");
            }
        };
        Alpaca.to("#/main/index/delete/" + id, param);
    };

</script>
